# OpenRCA SigNoz æ•°æ®å¯¼å…¥å·¥å…·

å°† OpenRCA æ•°æ®é›†çš„ metricã€trace å’Œ log æ•°æ®å¯¼å…¥åˆ° SigNoz è¿›è¡Œå¯è§†åŒ–åˆ†æã€‚æ”¯æŒå°†å†å²æ•°æ®çš„æ—¶é—´æˆ³æ˜ å°„åˆ°å½“å‰æ—¶é—´15å¤©å†…ï¼Œæ–¹ä¾¿åœ¨ SigNoz ç•Œé¢æŸ¥çœ‹ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š è¯»å– OpenRCA æ•°æ®é›†ä¸­çš„ metricã€trace å’Œ log æ•°æ®æ–‡ä»¶
  - æ”¯æŒ `metric_app.csv`ï¼ˆåº”ç”¨æŒ‡æ ‡ï¼‰
  - æ”¯æŒ `metric_container.csv`ï¼ˆå®¹å™¨æŒ‡æ ‡ï¼‰
  - æ”¯æŒ `trace_span.csv`ï¼ˆè¿½è¸ªæ•°æ®ï¼‰
  - æ”¯æŒ `log_service.csv`ï¼ˆæ—¥å¿—æ•°æ®ï¼‰
- â° æ”¯æŒæ—¶é—´æˆ³æ˜ å°„ï¼šå°†å†å²æ—¥æœŸæ˜ å°„åˆ°å½“å‰æ—¶é—´15å¤©å†…
- ğŸš€ é€šè¿‡ OpenTelemetry Protocol (OTLP) å°†æ•°æ®å‘é€åˆ° SigNoz
- ğŸ“¦ æ”¯æŒæ‰¹é‡å¤„ç†ä»¥æé«˜æ€§èƒ½
- ğŸ’¾ æµå¼å¤„ç†ï¼Œé€‚åˆå¤„ç†å¤§æ–‡ä»¶
- ğŸ”§ è‡ªåŠ¨æ„å»ºæ•°æ®ç›®å½•è·¯å¾„ï¼ˆåŸºäºæºæ—¥æœŸï¼‰
- ğŸ”„ å¯¼å…¥é¡ºåºï¼šå…ˆå¯¼å…¥ logï¼Œå†å¯¼å…¥ metricï¼Œæœ€åå¯¼å…¥ trace

## å‰ç½®è¦æ±‚

1. **Python 3.8+**
2. **å·²éƒ¨ç½²çš„ SigNoz å®ä¾‹**ï¼ˆæœ¬åœ° Docker éƒ¨ç½²ï¼‰
3. **OpenRCA æ•°æ®é›†**ï¼ˆä½äº `datasets/OpenRCA/Bank/telemetry/` ç›®å½•ï¼‰
4. **SigNoz é…ç½®æ–‡ä»¶**ï¼ˆä½äº `config/signoz/` ç›®å½•ï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼‰

## ç¯å¢ƒå‡†å¤‡

é¡¹ç›®æ”¯æŒä½¿ç”¨ **Poetry**ã€**uv** æˆ– **conda** è¿›è¡Œä¾èµ–ç®¡ç†ã€‚è¯·é€‰æ‹©å…¶ä¸­ä¸€ç§æ–¹å¼ï¼š

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Poetryï¼ˆæ¨èï¼‰

Poetry æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ Python ä¾èµ–ç®¡ç†å·¥å…·ã€‚

**1. å®‰è£… Poetry**

```bash
# macOS/Linux
curl -sSL https://install.python-poetry.org | python3 -

# æˆ–ä½¿ç”¨ pip
pip install poetry
```

**2. å®‰è£…é¡¹ç›®ä¾èµ–**

```bash
# å®‰è£…ä¾èµ–
poetry install

# è¿è¡Œè„šæœ¬ï¼ˆåœ¨ Poetry è™šæ‹Ÿç¯å¢ƒä¸­ï¼‰
poetry run python main.py --source-date 2021-03-04 --target-date 2024-12-19
```

**3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰**

```bash
# æ¿€æ´» Poetry è™šæ‹Ÿç¯å¢ƒ
poetry shell

# ç„¶åå¯ä»¥ç›´æ¥è¿è¡Œ
python main.py --source-date 2021-03-04 --target-date 2024-12-19
```

### æ–¹å¼äºŒï¼šä½¿ç”¨ uv

uv æ˜¯ä¸€ä¸ªæå¿«çš„ Python åŒ…ç®¡ç†å™¨å’Œè§£æå™¨ã€‚

**1. å®‰è£… uv**

```bash
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# æˆ–ä½¿ç”¨ pip
pip install uv
```

**2. å®‰è£…é¡¹ç›®ä¾èµ–**

```bash
# åŒæ­¥ä¾èµ–ï¼ˆæ ¹æ® pyproject.tomlï¼‰
uv sync

# è¿è¡Œè„šæœ¬
uv run python main.py --source-date 2021-03-04 --target-date 2024-12-19
```

**3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰**

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate  # macOS/Linux
# æˆ–
.venv\Scripts\activate  # Windows

# ç„¶åå¯ä»¥ç›´æ¥è¿è¡Œ
python main.py --source-date 2021-03-04 --target-date 2024-12-19
```

### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ conda + Poetry

conda ç”¨äºåˆ›å»º Python ç¯å¢ƒï¼ŒPoetry ç”¨äºç®¡ç†é¡¹ç›®ä¾èµ–ã€‚

**1. åˆ›å»º conda ç¯å¢ƒ**

```bash
# åˆ›å»ºæ–°ç¯å¢ƒï¼ˆPython 3.8+ï¼‰
conda create -n openrca-signoz python=3.9

# æ¿€æ´»ç¯å¢ƒ
conda activate openrca-signoz
```

**2. å®‰è£… Poetryï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰**

```bash
pip install poetry
```

**3. å®‰è£…é¡¹ç›®ä¾èµ–**

```bash
# ä½¿ç”¨ Poetry å®‰è£…ä¾èµ–ï¼ˆåœ¨ conda ç¯å¢ƒä¸­ï¼‰
poetry install

# è¿è¡Œè„šæœ¬ï¼ˆåœ¨ Poetry è™šæ‹Ÿç¯å¢ƒä¸­ï¼‰
poetry run python main.py --source-date 2021-03-04 --target-date 2024-12-19
```

**4. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰**

```bash
# æ¿€æ´» Poetry è™šæ‹Ÿç¯å¢ƒ
poetry shell

# ç„¶åå¯ä»¥ç›´æ¥è¿è¡Œ
python main.py --source-date 2021-03-04 --target-date 2024-12-19
```

### æ–¹å¼å››ï¼šä½¿ç”¨ venv + Poetry

ä½¿ç”¨ Python å†…ç½®çš„ venv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ŒPoetry ç®¡ç†ä¾èµ–ã€‚

**1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate  # macOS/Linux
# æˆ–
venv\Scripts\activate  # Windows
```

**2. å®‰è£… Poetryï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰**

```bash
pip install poetry
```

**3. å®‰è£…é¡¹ç›®ä¾èµ–**

```bash
# ä½¿ç”¨ Poetry å®‰è£…ä¾èµ–
poetry install

# è¿è¡Œè„šæœ¬ï¼ˆåœ¨ Poetry è™šæ‹Ÿç¯å¢ƒä¸­ï¼‰
poetry run python main.py --source-date 2021-03-04 --target-date 2024-12-19
```

**4. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼‰**

```bash
# æ¿€æ´» Poetry è™šæ‹Ÿç¯å¢ƒ
poetry shell

# ç„¶åå¯ä»¥ç›´æ¥è¿è¡Œ
python main.py --source-date 2021-03-04 --target-date 2024-12-19
```

## SigNoz é…ç½®

é¡¹ç›®å·²æä¾›é…ç½®å¥½çš„ SigNoz é…ç½®æ–‡ä»¶ï¼Œä½äº `config/signoz/` ç›®å½•ï¼š

- `metric-app.json` - åº”ç”¨æŒ‡æ ‡é…ç½®
- `metric-container.json` - å®¹å™¨æŒ‡æ ‡é…ç½®

**ä½¿ç”¨æ–¹æ³•ï¼š**
1. å°†é…ç½®æ–‡ä»¶å¯¼å…¥åˆ°ä½ çš„ SigNoz å®ä¾‹
2. æˆ–ç›´æ¥ä½¿ç”¨ SigNoz çš„é…ç½®ç®¡ç†åŠŸèƒ½åŠ è½½è¿™äº›é…ç½®

## å¿«é€Ÿå¼€å§‹

### 1. ç¡®ä¿ SigNoz æ­£åœ¨è¿è¡Œ

ç¡®ä¿ä½ çš„ SigNoz å®ä¾‹æ­£åœ¨è¿è¡Œï¼Œå¹¶ä¸” OTLP gRPC ç«¯ç‚¹å¯è®¿é—®ï¼ˆé»˜è®¤æ˜¯ `localhost:4317`ï¼‰ã€‚

```bash
# æ£€æŸ¥ SigNoz æ˜¯å¦åœ¨è¿è¡Œ
docker ps | grep signoz

# æˆ–è€…æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾
nc -zv localhost 4317
```

### 2. è¿è¡Œå¯¼å…¥è„šæœ¬

**åŸºæœ¬ç”¨æ³•ï¼ˆæœ€ç®€å•ï¼‰ï¼š**

```bash
python main.py \
  --source-date 2021-03-04 \
  --target-date 2024-12-19
```

è„šæœ¬ä¼šè‡ªåŠ¨æ ¹æ® `--source-date` æ„å»ºæ•°æ®ç›®å½•è·¯å¾„ï¼š`datasets/OpenRCA/Bank/telemetry/2021_03_04`

**å®Œæ•´ç¤ºä¾‹ï¼ˆè‡ªå®šä¹‰æ‰€æœ‰å‚æ•°ï¼‰ï¼š**

```bash
python main.py \
  --source-date 2021-03-04 \
  --target-date 2024-12-19 \
  --signoz-endpoint localhost:4317 \
  --data-dir datasets/OpenRCA/Bank/telemetry/2021_03_04 \
  --service-name openrca-bank \
  --batch-size 1000
```

### 3. æŸ¥çœ‹ç»“æœ

1. æ‰“å¼€ SigNoz Web ç•Œé¢ï¼ˆé€šå¸¸æ˜¯ `http://localhost:3301`ï¼‰
2. å¯¼èˆªåˆ°ç›¸åº”çš„é¡µé¢ï¼š
   - **Metrics é¡µé¢**ï¼šæŸ¥çœ‹å¯¼å…¥çš„ metric æ•°æ®ï¼ˆåº”ç”¨æŒ‡æ ‡å’Œå®¹å™¨æŒ‡æ ‡ï¼‰
   - **Traces é¡µé¢**ï¼šæŸ¥çœ‹å¯¼å…¥çš„ trace æ•°æ®
   - **Logs é¡µé¢**ï¼šæŸ¥çœ‹å¯¼å…¥çš„ log æ•°æ®
3. é€‰æ‹©æ—¶é—´èŒƒå›´ï¼ˆä½¿ç”¨ç›®æ ‡æ—¥æœŸé™„è¿‘çš„æ—¶é—´èŒƒå›´ï¼Œä¾‹å¦‚ï¼š2024-12-19 å‰åï¼‰
4. æŸ¥çœ‹å¯¼å…¥çš„æ•°æ®

## å‚æ•°è¯´æ˜

### å¿…éœ€å‚æ•°

- `--source-date YYYY-MM-DD`: æºæ—¥æœŸï¼Œdatasets ä¸­çš„å†å²æ—¥æœŸï¼ˆä¾‹å¦‚: `2021-03-04`ï¼‰
  - ç”¨äºæ—¶é—´æ˜ å°„è®¡ç®—
  - å¦‚æœä¸æä¾› `--data-dir`ï¼Œä¼šæ ¹æ®æ­¤å‚æ•°è‡ªåŠ¨æ„å»ºæ•°æ®ç›®å½•è·¯å¾„ï¼ˆæ ¼å¼ï¼š`datasets/OpenRCA/Bank/telemetry/YYYY_MM_DD`ï¼‰

- `--target-date YYYY-MM-DD`: ç›®æ ‡æ—¥æœŸï¼Œæ˜ å°„åˆ°çš„æ—¥æœŸï¼ˆå¿…é¡»åœ¨å½“å‰æ—¶é—´15å¤©å†…ï¼Œä¾‹å¦‚: `2024-12-19`ï¼‰
  - ç”¨äºæ—¶é—´æ˜ å°„è®¡ç®—
  - å¿…é¡»ä¸æ™šäºå½“å‰æ—¶é—´
  - å¿…é¡»åœ¨å½“å‰æ—¶é—´15å¤©å†…

### å¯é€‰å‚æ•°

- `--data-dir`: æ•°æ®ç›®å½•è·¯å¾„ï¼ˆå¯é€‰ï¼‰
  - å¦‚æœä¸æä¾›ï¼Œä¼šæ ¹æ® `--source-date` è‡ªåŠ¨æ„å»ºè·¯å¾„
  - å¦‚æœæä¾›ï¼Œä½¿ç”¨æŒ‡å®šçš„è·¯å¾„ï¼ˆä¾‹å¦‚: `datasets/OpenRCA/Bank/telemetry/2021_03_04`ï¼‰
  - ä»…ç”¨äºå®šä½æ•°æ®åŠ è½½è·¯å¾„ï¼Œä¸å½±å“æ—¶é—´æ˜ å°„é€»è¾‘

- `--signoz-endpoint`: SigNoz OTLP gRPC ç«¯ç‚¹ï¼ˆé»˜è®¤: `localhost:4317`ï¼‰

- `--service-name`: æœåŠ¡åç§°ï¼ˆé»˜è®¤: `openrca-bank`ï¼‰

- `--batch-size`: æ‰¹å¤„ç†å¤§å°ï¼ˆé»˜è®¤: `1000`ï¼‰

## Container Metric è¯´æ˜

Container metric æ•°æ®åŒ…å«å¤§é‡ä¸åŒçš„ KPI æŒ‡æ ‡ã€‚ä¸ºäº†ä¾¿äºåœ¨ SigNoz ä¸­ç®¡ç†å’ŒæŸ¥è¯¢ï¼Œå·¥å…·ä¼šæŒ‰å¤§ç±»è‡ªåŠ¨åˆ†ç»„ï¼š

- `container_mysql_metric` - MySQL ç›¸å…³æŒ‡æ ‡
- `container_oslinux_metric` - æ“ä½œç³»ç»Ÿ Linux ç›¸å…³æŒ‡æ ‡
- `container_redis_metric` - Redis ç›¸å…³æŒ‡æ ‡
- `container_container_metric` - Docker å®¹å™¨ç›¸å…³æŒ‡æ ‡
- `container_tomcat_metric` - Tomcat ç›¸å…³æŒ‡æ ‡
- `container_jvm_metric` - JVM ç›¸å…³æŒ‡æ ‡

æ¯ä¸ª metric ä½¿ç”¨ `kpi_name` å’Œ `cmdb_id` æ ‡ç­¾æ¥åŒºåˆ†ä¸åŒçš„æŒ‡æ ‡å’Œå®¹å™¨ã€‚

## æ—¶é—´æˆ³æ˜ å°„è¯´æ˜

è„šæœ¬ä¼šå°†æºæ—¥æœŸçš„æ•°æ®æ—¶é—´æˆ³æ˜ å°„åˆ°ç›®æ ‡æ—¥æœŸï¼Œè¿™æ ·å¯ä»¥åœ¨ SigNoz çš„æœ€è¿‘15å¤©å†…æŸ¥çœ‹å†å²æ•°æ®ã€‚

**å·¥ä½œåŸç†ï¼š**
- **æºæ—¥æœŸ**ï¼ˆ`--source-date`ï¼‰ï¼šæŒ‡å®š datasets ä¸­çš„å†å²æ—¥æœŸï¼ˆä¾‹å¦‚: `2021-03-04`ï¼‰
- **ç›®æ ‡æ—¥æœŸ**ï¼ˆ`--target-date`ï¼‰ï¼šå°†å†å²æ•°æ®æ˜ å°„åˆ°çš„æ—¥æœŸï¼ˆå¿…é¡»åœ¨å½“å‰æ—¶é—´15å¤©å†…ï¼Œä¾‹å¦‚: `2024-12-19`ï¼‰
- **æ—¶é—´åç§»**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„æ—¶é—´å·®ï¼Œå¹¶å°†æ‰€æœ‰æ—¶é—´æˆ³è¿›è¡Œç›¸åº”è°ƒæ•´

**ç¤ºä¾‹ï¼š**
```bash
# å°† 2021-03-04 çš„æ•°æ®æ˜ å°„åˆ° 2024-12-19
python main.py \
  --source-date 2021-03-04 \
  --target-date 2024-12-19
```

è¿™æ ·ï¼Œ2021-03-04 çš„æ•°æ®åœ¨ SigNoz ä¸­ä¼šæ˜¾ç¤ºä¸º 2024-12-19ï¼Œæ–¹ä¾¿åœ¨æœ€è¿‘15å¤©å†…æŸ¥çœ‹ã€‚

## æ•°æ®æ ¼å¼

è„šæœ¬ä¼šè¯»å–ä»¥ä¸‹æ ¼å¼çš„ CSV æ–‡ä»¶ï¼š

### Metric æ–‡ä»¶

**metric_app.csv**ï¼ˆåº”ç”¨æŒ‡æ ‡ï¼‰ï¼š
```csv
timestamp,rr,sr,cnt,mrt,tc
1614787440,100.0,100.0,22,53.27,ServiceTest1
```
- `timestamp`: æ—¶é—´æˆ³ï¼ˆç§’ï¼‰
- `rr`: è¯·æ±‚ç‡ (Request Rate)
- `sr`: æˆåŠŸç‡ (Success Rate)
- `cnt`: è®¡æ•° (Count)
- `mrt`: å¹³å‡å“åº”æ—¶é—´ (Mean Response Time)
- `tc`: æœåŠ¡åç§° (Service Name)

**metric_container.csv**ï¼ˆå®¹å™¨æŒ‡æ ‡ï¼‰ï¼š
```csv
timestamp,cmdb_id,kpi_name,value
1614787200,Tomcat04,OSLinux-CPU_CPU_CPUCpuUtil,26.2957
```
- `timestamp`: æ—¶é—´æˆ³ï¼ˆç§’ï¼‰
- `cmdb_id`: ç»„ä»¶ID
- `kpi_name`: KPIæŒ‡æ ‡åç§°
- `value`: æŒ‡æ ‡å€¼

### Trace æ–‡ä»¶

**trace_span.csv**ï¼ˆè¿½è¸ªæ•°æ®ï¼‰ï¼š
```csv
timestamp,cmdb_id,parent_id,span_id,trace_id,duration
1614787199628,dockerA2,369-bcou-dle-way1-c514cf30-43410@0824-2f0e47a816-17492,21030300016145905763,gw0120210304000517192504,19
```
- `timestamp`: æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
- `cmdb_id`: ç»„ä»¶/æœåŠ¡æ ‡è¯†
- `parent_id`: çˆ¶ span ID
- `span_id`: å½“å‰ span ID
- `trace_id`: trace ID
- `duration`: æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

### Log æ–‡ä»¶

**log_service.csv**ï¼ˆæ—¥å¿—æ•°æ®ï¼‰ï¼š
```csv
timestamp,cmdb_id,log_name,value,log_id
1614787200,Tomcat04,error_log,Error message,log_001
```
- `timestamp`: æ—¶é—´æˆ³ï¼ˆç§’ï¼‰
- `cmdb_id`: ç»„ä»¶æ ‡è¯†
- `log_name`: æ—¥å¿—åç§°
- `value`: æ—¥å¿—å†…å®¹
- `log_id`: æ—¥å¿—ID

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šä½¿ç”¨è‡ªåŠ¨æ„å»ºçš„æ•°æ®ç›®å½•ï¼ˆæ¨èï¼‰

```bash
# è„šæœ¬ä¼šè‡ªåŠ¨æ„å»ºè·¯å¾„ï¼šdatasets/OpenRCA/Bank/telemetry/2021_03_04
python main.py \
  --source-date 2021-03-04 \
  --target-date 2024-12-19
```

### ç¤ºä¾‹2ï¼šæŒ‡å®šè‡ªå®šä¹‰æ•°æ®ç›®å½•

```bash
# ä½¿ç”¨è‡ªå®šä¹‰çš„æ•°æ®ç›®å½•è·¯å¾„
python main.py \
  --source-date 2021-03-04 \
  --target-date 2024-12-19 \
  --data-dir /path/to/custom/data/dir
```

### ç¤ºä¾‹3ï¼šè‡ªå®šä¹‰ SigNoz ç«¯ç‚¹

```bash
python main.py \
  --source-date 2021-03-04 \
  --target-date 2024-12-19 \
  --signoz-endpoint your-signoz-host:4317
```

### ç¤ºä¾‹4ï¼šè°ƒæ•´æ‰¹å¤„ç†å¤§å°

```bash
# å¯¹äºå¤§æ•°æ®é›†ï¼Œå¯ä»¥å¢åŠ æ‰¹å¤„ç†å¤§å°ä»¥æé«˜æ€§èƒ½
python main.py \
  --source-date 2021-03-04 \
  --target-date 2024-12-19 \
  --batch-size 2000
```

## å¸¸è§é—®é¢˜

### Q: æ•°æ®æ²¡æœ‰æ˜¾ç¤ºåœ¨ SigNoz ä¸­ï¼Ÿ

**A:** 
- ç­‰å¾…å‡ åˆ†é’Ÿè®©æ•°æ®ç´¢å¼•å®Œæˆ
- æ£€æŸ¥æ—¶é—´èŒƒå›´è®¾ç½®ï¼ˆä½¿ç”¨ç›®æ ‡æ—¥æœŸé™„è¿‘çš„æ—¶é—´èŒƒå›´ï¼Œæ—¶åŒºé€‰æ‹© UTCï¼‰
- æŸ¥çœ‹ SigNoz æ—¥å¿—ç¡®è®¤æ•°æ®æ˜¯å¦æˆåŠŸæ¥æ”¶ï¼š
  ```bash
  docker logs <signoz-otel-collector-container> --tail 50
  ```
- ç¡®ä¿æœåŠ¡åç§°è¿‡æ»¤å™¨é€‰æ‹©äº†æ­£ç¡®çš„æœåŠ¡ï¼ˆæˆ–æ¸…é™¤æ‰€æœ‰è¿‡æ»¤å™¨ï¼‰
- å¯¹äº metric æ•°æ®ï¼Œæ£€æŸ¥ Metrics é¡µé¢ï¼›å¯¹äº trace æ•°æ®ï¼Œæ£€æŸ¥ Traces é¡µé¢ï¼›å¯¹äº log æ•°æ®ï¼Œæ£€æŸ¥ Logs é¡µé¢

### Q: è¿æ¥é”™è¯¯ï¼Ÿ

**A:**
- ç¡®è®¤ SigNoz æ­£åœ¨è¿è¡Œï¼š`docker ps | grep signoz`
- æ£€æŸ¥ OTLP ç«¯ç‚¹æ˜¯å¦æ­£ç¡®ï¼ˆé»˜è®¤: `localhost:4317`ï¼‰
- å¦‚æœä½¿ç”¨ Dockerï¼Œç¡®ä¿ç«¯å£æ˜ å°„æ­£ç¡®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®æ˜¯å¦å…è®¸è¿æ¥

### Q: ç›®æ ‡æ—¥æœŸéªŒè¯å¤±è´¥ï¼Ÿ

**A:**
- ç›®æ ‡æ—¥æœŸå¿…é¡»åœ¨å½“å‰æ—¶é—´15å¤©å†…
- ç›®æ ‡æ—¥æœŸä¸èƒ½æ™šäºå½“å‰æ—¶é—´
- æ£€æŸ¥æ—¥æœŸæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼š`YYYY-MM-DD`

### Q: æ•°æ®ç›®å½•ä¸å­˜åœ¨ï¼Ÿ

**A:**
- å¦‚æœä¸æä¾› `--data-dir`ï¼Œè„šæœ¬ä¼šæ ¹æ® `--source-date` è‡ªåŠ¨æ„å»ºè·¯å¾„
- ç¡®ä¿ `--source-date` æ ¼å¼æ­£ç¡®ï¼ˆä¾‹å¦‚: `2021-03-04` å¯¹åº”æ–‡ä»¶å¤¹ `2021_03_04`ï¼‰
- å¦‚æœä½¿ç”¨ `--data-dir`ï¼Œç¡®ä¿æŒ‡å®šçš„è·¯å¾„å­˜åœ¨ä¸”åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š
  - `log/log_service.csv`ï¼ˆå¯é€‰ï¼‰
  - `metric/metric_app.csv`ï¼ˆå¯é€‰ï¼‰
  - `metric/metric_container.csv`ï¼ˆå¯é€‰ï¼‰
  - `trace/trace_span.csv`ï¼ˆå¯é€‰ï¼‰

### Q: å¤„ç†é€Ÿåº¦æ…¢ï¼Ÿ

**A:**
- æ•°æ®é›†å¯èƒ½å¾ˆå¤§ï¼Œè¿™æ˜¯æ­£å¸¸çš„
- å¯ä»¥è°ƒæ•´ `--batch-size` å‚æ•°æ¥ä¼˜åŒ–æ€§èƒ½ï¼ˆé»˜è®¤: 1000ï¼‰
- å¯¹äºéå¸¸å¤§çš„æ•°æ®é›†ï¼Œè€ƒè™‘åˆ†æ‰¹å¤„ç†ä¸åŒæ—¥æœŸçš„æ•°æ®

## æ³¨æ„äº‹é¡¹

1. **å¯¼å…¥é¡ºåº**: è„šæœ¬ä¼šå…ˆå¯¼å…¥ log æ•°æ®ï¼Œç„¶åå¯¼å…¥ metric æ•°æ®ï¼ˆmetric_app.csv å’Œ metric_container.csvï¼‰ï¼Œæœ€åå¯¼å…¥ trace æ•°æ®ï¼ˆtrace_span.csvï¼‰
2. **æ—¶é—´æˆ³æ˜ å°„**: è„šæœ¬ä¼šå°†æºæ—¥æœŸçš„æ•°æ®æ—¶é—´æˆ³æ˜ å°„åˆ°ç›®æ ‡æ—¥æœŸï¼Œç¡®ä¿æ•°æ®åœ¨ SigNoz ä¸­æ˜¾ç¤ºä¸ºç›®æ ‡æ—¥æœŸçš„æ—¶é—´
3. **15å¤©é™åˆ¶**: ç›®æ ‡æ—¥æœŸå¿…é¡»åœ¨å½“å‰æ—¶é—´15å¤©å†…ï¼Œè¿™æ˜¯ä¸ºäº†ç¬¦åˆ SigNoz çš„æ•°æ®ä¿ç•™ç­–ç•¥
4. **è‡ªåŠ¨è·¯å¾„æ„å»º**: å¦‚æœä¸æä¾› `--data-dir`ï¼Œè„šæœ¬ä¼šæ ¹æ® `--source-date` è‡ªåŠ¨æ„å»ºæ•°æ®ç›®å½•è·¯å¾„ï¼ˆæ ¼å¼ï¼š`datasets/OpenRCA/Bank/telemetry/YYYY_MM_DD`ï¼‰
5. **æµå¼å¤„ç†**: è„šæœ¬é‡‡ç”¨æµå¼å¤„ç†æ–¹å¼ï¼Œè¾¹è¯»è¾¹å‘é€ï¼Œä¸ä¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®åˆ°å†…å­˜ï¼Œé€‚åˆå¤„ç†å¤§æ–‡ä»¶
6. **ç½‘ç»œè¿æ¥**: ç¡®ä¿èƒ½å¤Ÿè®¿é—® SigNoz çš„ OTLP ç«¯ç‚¹
7. **å¤„ç†æ—¶é—´**: å¦‚æœæ•°æ®é›†å¾ˆå¤§ï¼Œå¤„ç†å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…
8. **Metric æ—¶é—´æˆ³**: Metric å’Œ Log æ–‡ä»¶ä½¿ç”¨ç§’çº§æ—¶é—´æˆ³ï¼ŒTrace æ–‡ä»¶ä½¿ç”¨æ¯«ç§’çº§æ—¶é—´æˆ³ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†
9. **é…ç½®æ–‡ä»¶**: å¯ä»¥ç›´æ¥ä½¿ç”¨ `config/signoz/` ç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œæˆ–æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´

## è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ä¸ OpenRCA æ•°æ®é›†ç›¸åŒçš„è®¸å¯è¯ã€‚
